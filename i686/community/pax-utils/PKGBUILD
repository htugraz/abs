# $Id: PKGBUILD 137922 2015-08-04 09:30:26Z tredaelli $
# Maintainer: Timothy Redaelli <timothy.redaelli@gmail.com>
# Contributor: sh0 <mee@sh0.org>
# Contributor: Maxwel <msg.maxwel@gmail.com>

pkgname=pax-utils
pkgver=1.0.5
pkgrel=1
pkgdesc='ELF related utils for ELF 32/64 binaries that can check files for security relevant properties'
url='http://hardened.gentoo.org/pax-utils.xml'
arch=('i686' 'x86_64')
license=('GPL')
depends=('bash' 'libcap' 'python-pyelftools')
source=("http://distfiles.gentoo.org/distfiles/${pkgname}-${pkgver}.tar.xz")
sha256sums=('f69a9938e4af7912d26d585094bc0203e43571a990fdd048319088a8b8ad906f')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make USE_CAP='yes'
}

check() {
  # FIXME
  return
  cd "${srcdir}/${pkgname}-${pkgver}"
  # FIXME lddpath.py uses /lib64 before /usr/lib
  LD_LIBRARY_PATH="/usr/lib" make check
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make USE_PYTHON='yes' DESTDIR="${pkgdir}" install
}
