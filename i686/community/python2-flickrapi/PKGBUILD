# $Id: PKGBUILD 111313 2014-05-16 11:13:25Z fyan $
# Maintainer: Felix Yan <felixonmars@gmail.com>
# Contributor: Francois Garillot <francois[@]garillot.net>
# Contributor: György Balló <ballogy@freestart.hu>

pkgname=python2-flickrapi
_pkgname=flickrapi
pkgver=1.4.3
pkgrel=1
pkgdesc="The official Python interface to the Flickr API"
arch=('any')
url="http://stuvel.eu/flickrapi"
license=('Python')
depends=('python2')
makedepends=('python2-docutils' 'python2-setuptools')
checkdepends=('python2-nose')
source=("http://pypi.python.org/packages/source/f/$_pkgname/$_pkgname-$pkgver.tar.gz")

prepare() {
  cd $_pkgname-$pkgver
  find . -type f | xargs sed -i 's@^#!.*python$@#!/usr/bin/python2@'
}

build() {
  cd $_pkgname-$pkgver
  python2 setup.py build
}

check() {
  cd $_pkgname-$pkgver
  nosetests2
}

package() {
  cd "$srcdir/$_pkgname-$pkgver"

  python2 setup.py install --root=$pkgdir/ --optimize=1

  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

sha512sums=('bcd80046998f45b0e1eea666e29fa34b828c617f2fbbd93f4872b3d41267f18c364514854806b4e4c6336419819cb68b9d710dbb72a8c0043bbec081f4b041c0')
