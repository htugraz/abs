# $Id: PKGBUILD 116637 2014-07-31 14:36:01Z arcanis $
# Maintainer: Evgeniy Alekseev <arcanis.arch at gmail dot com>
# Contributor: Bart≈Çomiej Piotrowski <bpiotrowski at archlinux dot org>
# Contributor: Felipe Hommen <felibank at gmail dot com>
# Contributor: moostik <mooostik at gmail dot com>

pkgname=geogebra
pkgver=4.4.41.0
pkgrel=1
pkgdesc="Dynamic mathematics software with interactive graphics, algebra and spreadsheet"
arch=('any')
url='http://www.geogebra.org/'
license=('GPL3' 'CCPL:by-sa' 'CCPL:by-nc')
depends=('desktop-file-utils' 'gsl' 'hicolor-icon-theme' 'java-runtime'
         'shared-mime-info' 'xdg-utils')
source=(http://download.geogebra.org/installers/4.4/GeoGebra-Linux-Installer-${pkgver}.tar.gz)
install=geogebra.install
md5sums=('8ea4bbd03c002a24a7a5e7f49a7ac94c')

prepare() {
  cd "${pkgname}-${pkgver}"
  sed -i 's|/usr|${pkgdir}/usr|g' install.sh
}
package() {
  cd "${pkgname}-${pkgver}"
  install -dm755 "${pkgdir}/usr/bin" \
                 "${pkgdir}/usr/share/"{applications,geogebra}
  source install.sh
  install -Dm644 "_license.txt" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"

  rm -rf "${pkgdir}/usr/share/mime/"
}
