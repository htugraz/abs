# $Id: PKGBUILD 123721 2014-12-10 14:45:00Z fyan $
# Maintainer: Felix Yan <felixonmars@archlinux.org>

pkgbase=fira
pkgname=(ttf-fira-sans ttf-fira-mono otf-fira-sans otf-fira-mono)
pkgver=3.111
_commit=d6c39732a0f69080b748b967e87928cac53d342e
pkgrel=2
epoch=1
pkgdesc="Mozilla's typeface designed for Firefox OS"
arch=('any')
license=('custom:OFL')
url='https://github.com/mozilla/Fira'
makedepends=('git')
depends=('fontconfig' 'xorg-font-utils')
source=("git+https://github.com/mozilla/Fira.git#commit=$_commit")
md5sums=('SKIP')

function _package {
    cd "$srcdir/Fira"

    case "$1" in
        ttf-fira-sans)
            pkgdesc="Mozilla's sans-serif typeface designed for Firefox OS"
            install=ttf.install
            cd ttf
            fonts=(FiraSans-*.ttf)
            installdir=TTF;;
        ttf-fira-mono)
            pkgdesc="Mozilla's monospace typeface designed for Firefox OS"
            install=ttf.install
            cd ttf
            fonts=(FiraMono-*.ttf)
            installdir=TTF;;
        otf-fira-sans)
            pkgdesc="Mozilla's sans-serif typeface designed for Firefox OS"
            install=otf.install
            cd otf
            fonts=(FiraSans-*.otf)
            installdir=OTF;;
        otf-fira-mono)
            pkgdesc="Mozilla's monospace typeface designed for Firefox OS"
            install=otf.install
            cd otf
            fonts=(FiraMono-*.otf)
            installdir=OTF;;
    esac

    # Prepare destination directory
    install -dm755 "$pkgdir/usr/share/fonts/$installdir"

    # Install fonts
    for font in "${fonts[@]}"; do
        install -m644 "$font" "$pkgdir/usr/share/fonts/$installdir"
    done

    install -D -m644 ../LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"   
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done
