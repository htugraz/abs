# $Id: PKGBUILD 94928 2013-08-01 07:01:23Z bpiotrowski $
# Maintainer: Lukas Fleischer <archlinux at cryptocrack dot de>
# Contributor: Daniel Isenmann <daniel.isenmann [at] gmx [dot] de>

pkgname=metapixel
pkgver=1.0.2
pkgrel=5
pkgdesc='A program for generating photomosaics.'
arch=('i686' 'x86_64')
url='http://www.complang.tuwien.ac.at/schani/metapixel/'
license=('GPL')
depends=('giflib' 'libjpeg' 'libpng' 'perl')
source=("http://www.complang.tuwien.ac.at/schani/metapixel/files/${pkgname}-${pkgver}.tar.gz"
        'metapixel-1.0.2-libpng-1.5.patch'
        'metapixel-1.0.2-giflib-5.0.patch')
md5sums=('af5d77d38826756af213a08e3ada9941'
         '1832a79790b07402735bfeb9f71f36e9'
         'f16abb33c545734eea36ec16c92a05e8')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  patch -p1 -i ../metapixel-1.0.2-libpng-1.5.patch
  patch -p0 -i ../metapixel-1.0.2-giflib-5.0.patch

  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  
  install -dm0755 "${pkgdir}/usr/share/man/man1"

  make PREFIX="${pkgdir}/usr" install
}
