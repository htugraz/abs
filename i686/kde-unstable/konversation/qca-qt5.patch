From: Harald Sitter <sitter@kde.org>
Date: Tue, 13 Jan 2015 12:45:02 +0000
Subject: use co-installable qca-qt5 version
X-Git-Url: http://quickgit.kde.org/?p=konversation.git&a=commitdiff&h=3aa918b5e3ac0f90a76d55c2bab12fafcbb1279b
---
use co-installable qca-qt5 version

REVIEW: 122031
---


--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -44,9 +44,9 @@
 find_package(Phonon4Qt5 4.6.60 REQUIRED)
 include_directories(${PHONON_INCLUDES})
 
-find_package(Qca 2.1.0)
-set_package_properties(Qca PROPERTIES DESCRIPTION "Support for encryption"
-                       URL "http://delta.affinix.com/qca"
+find_package(Qca-qt5 2.1.0)
+set_package_properties(Qca-qt5 PROPERTIES DESCRIPTION "Support for encryption"
+                       URL "http://download.kde.org/stable/qca-qt5/"
                        TYPE OPTIONAL)
 check_include_file("stropts.h" HAVE_STROPTS_H)
 check_include_file("byteswap.h" HAVE_BYTESWAP_H)
@@ -55,7 +55,7 @@
 configure_file(config-konversation.h.cmake ${CMAKE_CURRENT_BINARY_DIR}/config-konversation.h )
 include_directories(${CMAKE_CURRENT_BINARY_DIR})
 
-set(HAVE_QCA2 ${Qca_FOUND})
+set(HAVE_QCA2 ${Qca-qt5_FOUND})
 
 add_definitions(
   -DQT_USE_QSTRINGBUILDER

--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -185,10 +185,10 @@
      dcc/whiteboardfontchooserui.ui
 )
 
-if (Qca_FOUND)
+if (Qca-qt5_FOUND)
     set(cipher_SRCS
         cipher.cpp)
-endif (Qca_FOUND)
+endif (Qca-qt5_FOUND)
 
 set(upnp_SRCS
     upnp/soap.cpp
@@ -235,9 +235,9 @@
     KF5::ItemViews
     Phonon::phonon4qt5)
 
-if (Qca_FOUND)
-    target_link_libraries(konversation qca)
-endif (Qca_FOUND)
+if (Qca-qt5_FOUND)
+    target_link_libraries(konversation qca-qt5)
+endif ()
 
 install(TARGETS konversation ${INSTALL_TARGETS_DEFAULT_ARGS})
 

