# $Id: PKGBUILD 103403 2014-01-05 18:10:16Z alucryd $
# Maintainer: Maxime Gauduin <alucryd@gmail.com>
# Contributor: kozec <kozec@kozec.com>
# Contributor: Limao Luo <luolimao+AUR@gmail.com>

pkgname=aegisub
pkgver=3.1.0
pkgrel=1
pkgdesc="A general-purpose subtitle editor with ASS/SSA support"
arch=('i686' 'x86_64')
url="http://www.aegisub.org"
license=('GPL' 'BSD')
depends=('boost-libs' 'desktop-file-utils' 'ffms2' 'fftw' 'hunspell' 'lua51' 'wxgtk')
makedepends=('boost' 'intltool' 'mesa')
install="${pkgname}.install"
source=("http://ftp.aegisub.org/pub/releases/${pkgname}-${pkgver}.tar.xz"
        'version.patch')
sha256sums=('0d2befed013f3c64ab2cdf725f2b865fe2d074b35b621b7a61298b95f67def15'
            '4119b79363512b18c6ddcbbdfb87b35c51e0ea149e763b126f568e80f956a01f')

prepare() {
  patch -Np1 -i version.patch
}

build() {
  ./configure --prefix='/usr' --without-{portaudio,openal,oss}
  make
}

package() {
  make DESTDIR="${pkgdir}" install

# License
  install -dm 755 "${pkgdir}"/usr/share/licenses/aegisub
  install -m 644 LICENCE "${pkgdir}"/usr/share/licenses/aegisub/LICENSE
}

# vim: ts=2 sw=2 et:
