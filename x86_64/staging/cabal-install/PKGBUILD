# Maintainer: Thomas Dziedzic <gostrc@gmail.com>
# Maintainer: Vesa Kaihlavirta <vesa@archlinux.org>
# Contributor: Arch Haskell Team <arch-haskell@haskell.org>

pkgname=cabal-install
pkgver=1.18.0.3
pkgrel=1
pkgdesc="The command-line interface for Cabal and Hackage."
url="http://hackage.haskell.org/package/cabal-install"
license=('custom:BSD3')
arch=('i686' 'x86_64')
makedepends=('ghc')
depends=('gmp' 'zlib')
source=("http://hackage.haskell.org/packages/archive/cabal-install/${pkgver}/cabal-install-${pkgver}.tar.gz")
md5sums=('f7823387c21b4969e64238f63bb25740')

build() {
  cd cabal-install-${pkgver}

  sh bootstrap.sh --user
}

package() {
  cd cabal-install-${pkgver}

  install -D -m755 /build/.cabal/bin/cabal $pkgdir/usr/bin/cabal
  install -D -m644 LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
    
  # add bash completion
  install -d ${pkgdir}/usr/share/bash-completion/completions
  install -m644 bash-completion/cabal \
    ${pkgdir}/usr/share/bash-completion/completions
}
