# $Id: PKGBUILD 213858 2014-05-30 16:14:38Z bpiotrowski $
# Maintainer: Andreas Radke <andyrtr@archlinux.org>
# Maintainer: Bart≈Çomiej Piotrowski <bpiotrowski@archlinux.org>

pkgbase="libreoffice-i18n"

_rcver=4.2.4.2
pkgver=4.2.4
pkgrel=2

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('any')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
#http://download.documentfoundation.org/mirrors/all.html
_url="http://download.documentfoundation.org/libreoffice/stable"
#_url="http://download.documentfoundation.org/libreoffice/testing"
#_url="http://dev-builds.libreoffice.org/pre-releases"
#_url="http://www.libreoffice.org/download/pre-releases"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af           "Afrikaans"'
  'am           "Amharic"'
  'ar           "Arabic"'
  'as           "Assamese (India)"'
  'ast          "Asturianu"'
  'be           "Belarusian"'
  'bg           "Bulgarian"'
  'bn           "Bengali"'
  'bn-IN        "Bengali (India)"'
  'bo           "Tibetan"'
  'br           "Breton"'
  'brx          "Bodo"'
  'bs           "Bosnian"'
  'ca           "Catalan"'
  'ca-valencia  "Catalan (Valencia)"'
  'cs           "Czech"'
  'cy           "Welsh"'
  'da           "Danish"'
  'de           "German"'
  'dgo          "Dogri"'
  'dz           "Dzongkha"'
  'el           "Greek"'
  'en-GB        "English (GB)"'
  'en-ZA        "English (ZA)"'
  'eo           "Esperanto"'
  'es           "Spanish"'
  'et           "Estonian"'
  'eu           "Basque"'
  'fa           "Persian"'
  'fi           "Finnish"'
  'fr           "French"'
  'ga           "Irish"'
  'gd           "Gaelic (Scottish)"'
  'gl           "Galician"'
  'gu           "Gujarati"'
  'he           "Hebrew"'
  'hi           "Hindi"'
  'hr           "Croatian"'
  'hu           "Hungarian"'
  'id           "Indonesian"'
  'is           "Icelandic"'
  'it           "Italian"'
  'ja           "Japanese"'
  'ka           "Georgian"'
  'kk           "Kazakh"'
  'km           "Khmer (Cambodia)"'
  'kmr-Latn     "Kurdish"'
  'kn           "Kannada"'
  'ko           "Korean"'
  'kok           "Konkani"'
  'ks           "Kashmiri"'
  'lb           "Luxembourgish"'
  'lo           "Lao"'
  'lt           "Lithuanian"'
  'lv           "Latvian"'
  'mai           "Maithili"'
  'mk           "Macedonian"'
  'ml           "Malayalam"'
  'mn           "Mongolian"'
  'mni           "Manipuri"'
  'mr           "Marathi"'
  'my           "Burmese"'
  'nb           "Norwegian Bokmal"'
  'ne           "Nepali"'
  'nl           "Dutch"'
  'nn           "Norwegian Nynorsk"'
  'nr           "Ndebele (South)"'
  'nso          "Northern Sotho"'
  'oc           "Occitan"'
  'om           "Oromo"'
  'or           "Oriya"'
  'pa-IN        "Punjabi (India)"'
  'pl           "Polish"'
  'pt           "Portuguese"'
  'pt-BR        "Portuguese (Brasil)"'
  'ro           "Romanian"'
  'ru           "Russian"'
  'rw           "Kinyarwanda"'
  'sa-IN        "Sanskrit (India)"'
  'sat          "Santali"'
  'sd           "Sindhi"'
  'si           "Singhalese"'
  'sid          "Sidama"'
  'sk           "Slovak"'
  'sl           "Slovenian"'
  'sq           "Albanien"'
  'sr           "Serbian"'
  'sr-Latn      "Serbian (Latin)"'
  'ss           "Swati"'
  'st           "Southern Sotho"'
  'sv           "Swedish"'
  'sw-TZ        "Swahili (Tanzania)"'
  'ta           "Tamil"'
  'te           "Telugu"'
  'tg           "Tajik"'
  'th           "Thai"'
  'tn           "Tswana"'
  'tr           "Turkish"'
  'ts           "Tsonga"'
  'tt           "Tatar"'
  'ug           "Uighur"'
  'uk           "Ukrainian"'
  'uz           "Uzbek"'
  've           "Venda"'
  'vi           "Vietnamese"'
  'xh           "Xhosa"'
  'zh-CN        "Chinese (simplified)"'
  'zh-TW        "Chinese (traditional)"'
  'zu           "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # remove dictionaries if shipped - we ship them now in separate packages
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done

    # the helppack rpm goes also into the langpack dir
    # so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=("openoffice-$1" 'libreoffice-langpack')
  replaces=("openoffice-$1")
  conflicts=("openoffice-$1")

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done

md5sums=('5d327ab4e78d93e57f1306d790db9242'
         'e959e407896d96650d02944969277a7c'
         '0eaef4bde3c3a4703a080a56169a9429'
         'b0bdb093d834209dbbc103e4c21a64fb'
         '4cdf262d75e176ce8cf62e38bd4b4a10'
         'a95c0d73402cbc3dc9bd5503ffa1ae00'
         '9778cf05e12e66a5ea6d6cfbd45abde9'
         'a29d3d4ca4835fd59006cca9b003481a'
         '5a80c7229c9e33cdf0345a5fc9147f40'
         '6a9e998043da76ac73b3b31c4680c5fb'
         'f18832d0a9f788c23e9dab0550d74598'
         '18cf2402cb7f989eece37c4aae76f9f6'
         'bb10cdd229bed3f2ec702dec35c0d0e2'
         '1602fce30fa3e95c40a4b9b8a66ef11b'
         '18822798b760ccfc45f9c446d4ecf328'
         '2c0f314a113bf6dc04969e6c65167f91'
         'b13b4488af84ef83f65603e333a0b79b'
         '40cf22f00d0b592d3397706b499a31a6'
         'c5d50375ac4abdeeebad99a0a0bb7b04'
         'ba201096e1da7ce2b43884ec6de2c467'
         '7add1c3279b8d0a5c00fd454b5200dc8'
         '4151ac17288b383bb67e3dfd8e084b6a'
         'd92de92ca531a397e208def34d7fe6a4'
         '546a598d3e6fefd6a085bc38357460a4'
         '455ff28b337c8afb6e72d905450427a7'
         'bce9da8aaeae5db1e6112780c6f60bae'
         '6b42a661bc7ea59634371f8c28b72f33'
         '2088a5a3e6793c27f190e72b3dc9357d'
         '83f8fbd38ace7942004a47f8903fcaf3'
         'd7116d0a8ba953f76a594b655500f855'
         '62d26b2d7a0d91409164210eb069bb49'
         '7f5be603eb32376e8dfc3bc6d7e6acaa'
         '69e82ee1f3c8049a2bfb0c2e3adbc5e4'
         'bfab4da94d8c7f4c193ab8f353119ef3'
         'af86add2127dadce34156093e8240d57'
         'a7df4f102394b4f7fe96263fafa3c537'
         '30742e5ae5b7fcd3526a3ddd6996f237'
         'f43f523cf5e8078d12da8d75eb7a3746'
         '8659eec023d41bc006f2e5262493f8e9'
         '70de72fc85178757afecad027c3bffca'
         'd59d4e4745081306d793a751f282b26d'
         '64f89b27d796f2be73564347c69266b7'
         '82f57180fe07e137b3d8def92f63a435'
         '6a487fbf2fb96ff16a5db661ee64b865'
         '718e600699b52c896b95c1b80505b537'
         '13238688cc9d98050fd303bf5243cba4'
         '6f216e6e56ded4179fc3fe0c6fb8ec74'
         'f33760e4c9ee621f2422793f78c13fad'
         'ee157b5bfe30e44c24e4862384e36080'
         'c338062b621b1473c0fc2e0b26eb07d5'
         'da3a9b7c508336799f3a8cb307bd5a3a'
         'de342fe0c62f9d32454dd7e60d2877e1'
         '6f23ddffac419661b8818380d4af3ea4'
         'c83c1009a279ea26de46b4e1a19b5e2c'
         'aa4d9800d396c0848ef4d24575abb72b'
         '53cd28c59f1ae1fd65e7f61dabfea53f'
         'd1e95db4e8c4e3d728a27a6ef8b029b7'
         '1fe4193e39783648e93bd1d93cba5dcd'
         'cc86bebe959a5c67816a951ba9434c18'
         '3eca85bb06458240adb3bdbb0e3307a7'
         '52fda3b804d515e0c6daa081c23aea10'
         '50c9804cf5fb6000ee9d31a4fda16751'
         '62fb2aeb767f0b7d7eda692929eeacd6'
         'ba65d9af025e2065aaa38f0fead42a98'
         '737f0913dafc776bec6ba3fdb1b44545'
         '220db88c349597268e257edc2791c546'
         '003d2c523cae5cd5c345060fceac4952'
         'cd3b6f0ce376c613c61d417dfd7c6f28'
         'df674d94e32832c2edf45ec7e2d7fbab'
         'dca498bd55405bb69a1d07aa648dea8d'
         '455c506d061b57b998c35172637b9c1a'
         '265d305d6b96f72c966cf5ac9178b7fb'
         'e4704469a58741b670d7a4664af0163f'
         'ebcc75a6ffba5d6a48edea380993466e'
         '28f86a00b23a1f55751ccbdb78cd03e0'
         '427e8bae3b59ef9b3f1f9f1a7885111b'
         'c33cd7ddfa4b68d64d23bacc88c04d10'
         '7ccbadf2526ab12b7fb5e1dc5a43f0f1'
         'a26c8e310e87ad0799b8e810d3ec5b09'
         '8bf07b31bb02784fec7a517e9038843e'
         '6158ac4783097e7f28ae71920b37aa38'
         '5716a2090cebf0faf25ff78a33636212'
         '1ac59ea993df8d5d9d5cc38874f13522'
         '133c25682b4a590dae45456583a5411e'
         '9d2518043d73069c92e38e2c86180d42'
         '4caf0dbb731ddfcee35b2d2cb068de87'
         'bdc51250aa1040473221c841fcc5fa7e'
         'cc4c3a7bb3d588e4bf450e4fd7a61728'
         '8932f5bdcedd6a3303a5ef160a99ad9f'
         '44b2a21e2cb0196ef1bd9a7de22fe165'
         '91a02e316a4699457787c890ebf4e158'
         '4c0f7da2796bda17bd2f5648fe5f30ff'
         '4a3d84ebd4687f47c44263fb3a5228e4'
         'ccc32a7806cdf7a8eb036ed90b346b9b'
         '138bc09c53cfb516c073eb1025500e9d'
         'b82ef3f4b84bf18eaa146d5eecceace2'
         'abca6370d5c22951515e4223efdca02d'
         '0207d2a801f17c40199d7f25cf2a7159'
         '55cc14452f57bd8f9f5a7e1f42e75efe'
         'c69657948acb6ca34bda15718a29180d'
         'c3c1d7e0ed6498d4e13f8135f6c69267'
         '879d16476375ec06983fad4e0034c271'
         '4e646773b4a899e2b42d49f3cb1296d0'
         '6a15dfff99fc4b94c21965954965c68e'
         '2d656f9bceb70b2bd147e373ce4b3115'
         '8a1391f3dd5696e4ebeb0ecefd4330f8'
         'c2d94f60814f9679bb2320a61a680b55'
         '04a71404c9cd848b9d33960ff0b14e06'
         '6c629be171fdb34f1cb73547a9994774'
         '937eb6ee8b45b370bf8bfd8438408b7a'
         '60989d77ad83781917e20a0af6f82c13'
         'b59b5d5f24a84966fe84df9ca94ffeff'
         '8b93a79eaf7dd26a1e3c9d34d673fbad'
         'e71632a94ec077af1315fd4ee2ab9d50'
         '9ab84b502a79f680d3d18bc9b3011cd8'
         '0dce3fba1462f079cfa94cafa782c1f4'
         '27346e37077bfe18a91b85c27a58bfb5'
         '6c57d5384f551779115f6f471147e572'
         '5260a45848f611624b7be4e950138213'
         'a940baadb2991ba8d966d27bc892cf2f'
         '8f5dc4cfaaf399e184a3a74628fa2433'
         '299a5ea5ee274cd806438eb88fc88a25'
         'bd362a183a58a06a490f199369982d74'
         'd737ee043e5a8d50b697cb267cf9b891'
         'a8016bbd9e89c9b69d3faad50167214e'
         'f57d29bacb09be5cd38d04bd4074c730'
         '8d5c236dec42173a4d88e181fd6bfc68'
         '9a4decba7fb9269e5446356c86625df4'
         '0bfbfc57dd70df881c46dd71d52e4135'
         '77fa8d676a880824c3868d0f3e4a2cac'
         '67880de4c7365f4f6ea3b359e7e43c7b'
         '22086c8cd18fdd2e691b33cba055bf4f'
         '281509c9d1f6831cacc518cb6fa14be3'
         'e48819b2aa8abe414ef13d2c11125879'
         'b363cf532aac94abb3ee01b0783f74f4'
         '9024c6c7d994c40d8877c7ee985feff7'
         '86e4929484f988ef5fc23a2580dd1dd8'
         'ca61acb64764e209332c4a83bb758c41'
         'fb509d8795f13efe18a58a3d0b57304c'
         '97663c7b5d8f18ee9f2c7521636593fc'
         '97d16dd3f5f6bb1dd66dc5c23cd66671'
         '1f72348691539a36772822e6ded851f0'
         '9a5615e6dc69848f161d9d5f1ab6c406'
         'acdec9ad23357b4f9a859ddde357d645'
         'faab2cb0d0a1b8b09fa0e1a1efbf80d2'
         '39e4922ffa01c0d5bda7b5330a977770'
         '7970c5fbc5b6dfaebfe65f9e1d69ef12'
         'fba722abc35a421606f8fdaa28e10134'
         'fca4e91d29fe792431cdb9f628cd13cd'
         'fd681c86fb61ed2295c36586e5b0f0ee'
         '98a5a44c9b68a1a10f74eec9a4dfeffc'
         '0857891ec88037835cdbc242aede422d'
         '7148212e760b26897cf970cd19ce2516'
         '106c8bee468a2db05f01aa97366d96a6'
         'ef2b5a356abe3fe9d78d095026007ce6'
         'a34946e6d25fe4d5842928e08903f2b7'
         '5b5fc4bed3feb14137382513fb221f9c'
         'e880dffc94e5c92b74eca2a9d8c5d9f2'
         '0621f222e3f17ccf3448b0d52ceaf356'
         '0e95c2c946c2e8429c44e4c9c2ebec90'
         '1792cd9f838f5b352e4a6e7d70be199c'
         '529af51d9547cb84de8f0d0ea7e41394'
         'a5ed19e4e411f2bbd4edd548ee1a209d'
         'b3077494b37906c4d35371ea413709d3'
         'b79a626a32b4034c90fb4853bae3deeb'
         '9ffd1fd617ff148860da6b6ad0e511c3')
