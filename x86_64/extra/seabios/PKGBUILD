# $Id: PKGBUILD 213864 2014-05-30 16:37:12Z bpiotrowski $
# Maintainer: Tobias Powalowski <tpowa@archlinux.org>

pkgname=seabios
pkgver=1.7.5
pkgrel=1
pkgdesc="A 16-bit x86 bios"
arch=('any')
url="http://www.coreboot.org/SeaBIOS"
license=('GPL3' 'LGPL3')
makedepends=('iasl' 'python2' 'inetutils')
options=('!makeflags' '!strip')
source=(http://code.coreboot.org/p/seabios/downloads/get/${pkgname}-${pkgver}.tar.gz)
sha1sums=('1ee607f720b848fa7a968741151991b645979f7e')

prepare() {
  cd ${pkgname}-${pkgver}
  sed -i 's/python/python2/g' Makefile
}

build() {
  make -C ${pkgname}-${pkgver}
}

package() {
  install -Dm644 ${pkgname}-${pkgver}/out/bios.bin "${pkgdir}/usr/share/qemu/bios.bin"
  install -Dm644 ${pkgname}-${pkgver}/out/src/fw/*.aml "${pkgdir}/usr/share/qemu/"
}
