commit 5915982ccdbf060ede5123e8f7617b1cbcb1d096
Author: Felix Yan <felixonmars@archlinux.org>
Date:   Wed Nov 25 13:12:45 2015 +0800

    Show distribution info in System Info tab
    
    Change-Id: Id7d23c60e88285e385c6f32f1fd6f0d1ca3b6094

diff --git a/modules/system_info/dbus/dbussysteminfo.h b/modules/system_info/dbus/dbussysteminfo.h
index ffb07c5..3d280a2 100644
--- a/modules/system_info/dbus/dbussysteminfo.h
+++ b/modules/system_info/dbus/dbussysteminfo.h
@@ -55,6 +55,18 @@ public:
     inline QString version() const
     { return qvariant_cast< QString >(property("Version")); }
 
+    Q_PROPERTY(QString DistroID READ distroId)
+    inline QString distroId() const
+    { return qvariant_cast< QString >(property("DistroID")); }
+
+    Q_PROPERTY(QString DistroDesc READ distroDesc)
+    inline QString distroDesc() const
+    { return qvariant_cast< QString >(property("DistroDesc")); }
+
+    Q_PROPERTY(QString DistroVer READ distroVer)
+    inline QString distroVer() const
+    { return qvariant_cast< QString >(property("DistroVer")); }
+
 public Q_SLOTS: // METHODS
 Q_SIGNALS: // SIGNALS
 };
diff --git a/modules/system_info/systeminfo.cpp b/modules/system_info/systeminfo.cpp
index 7c1de7b..36c2ec6 100644
--- a/modules/system_info/systeminfo.cpp
+++ b/modules/system_info/systeminfo.cpp
@@ -51,6 +51,12 @@ SystemInfo::SystemInfo()
     info_sysVersionContent->setAlignment(Qt::AlignVCenter | Qt::AlignLeft);
     info_sysVersionContent->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Preferred);
 
+    QLabel *info_sysDistro = new QLabel(tr("Distribution:"));
+    info_sysDistro->setAlignment(Qt::AlignVCenter | Qt::AlignRight);
+    QLabel *info_sysDistroContent = new QLabel(QString(tr("%1 %2")).arg(m_dbusSystemInfo.distroDesc(), m_dbusSystemInfo.distroVer()));
+    info_sysDistroContent->setAlignment(Qt::AlignVCenter | Qt::AlignLeft);
+    info_sysDistroContent->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Preferred);
+
     QLabel *info_sysType = new QLabel(tr("System Type:"));
     info_sysType->setAlignment(Qt::AlignVCenter | Qt::AlignRight);
     QLabel *info_sysTypeContent = new QLabel(QString(tr("%1 Bit")).arg(m_dbusSystemInfo.systemType()));
@@ -75,14 +81,20 @@ SystemInfo::SystemInfo()
     QGridLayout *infoGrid = new QGridLayout;
     infoGrid->addWidget(info_sysVersion, 0, 0);
     infoGrid->addWidget(info_sysVersionContent, 0, 1);
-    infoGrid->addWidget(info_sysType, 1, 0);
-    infoGrid->addWidget(info_sysTypeContent, 1, 1);
-    infoGrid->addWidget(info_cpuType, 2, 0);
-    infoGrid->addWidget(info_cpuTypeContent, 2, 1);
-    infoGrid->addWidget(info_memory, 3, 0);
-    infoGrid->addWidget(info_memoryContent, 3, 1);
-    infoGrid->addWidget(info_hardDrive, 4, 0);
-    infoGrid->addWidget(info_hardDriveContent, 4, 1);
+
+    if (m_dbusSystemInfo.distroId() != "" && m_dbusSystemInfo.distroId() != "Deepin") {
+        infoGrid->addWidget(info_sysDistro, 1, 0);
+        infoGrid->addWidget(info_sysDistroContent, 1, 1);
+    }
+
+    infoGrid->addWidget(info_sysType, 2, 0);
+    infoGrid->addWidget(info_sysTypeContent, 2, 1);
+    infoGrid->addWidget(info_cpuType, 3, 0);
+    infoGrid->addWidget(info_cpuTypeContent, 3, 1);
+    infoGrid->addWidget(info_memory, 4, 0);
+    infoGrid->addWidget(info_memoryContent, 4, 1);
+    infoGrid->addWidget(info_hardDrive, 5, 0);
+    infoGrid->addWidget(info_hardDriveContent, 5, 1);
 
     QVBoxLayout *infoLayout = new QVBoxLayout;
     infoLayout->addWidget(deepinLogo);
