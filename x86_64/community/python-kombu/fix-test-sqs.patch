From 6510b1dd322dd76cb9dcd7587be8b4b22513b107 Mon Sep 17 00:00:00 2001
From: Felix Yan <felixonmars@archlinux.org>
Date: Sat, 10 Oct 2015 09:07:44 +0800
Subject: [PATCH] Fix test_sqs for python 3.x

---
 kombu/tests/transport/test_SQS.py | 16 ++++++++--------
 requirements/test-ci3.txt         |  1 +
 2 files changed, 9 insertions(+), 8 deletions(-)

diff --git a/kombu/tests/transport/test_SQS.py b/kombu/tests/transport/test_SQS.py
index 69704d5..0a33fb5 100644
--- a/kombu/tests/transport/test_SQS.py
+++ b/kombu/tests/transport/test_SQS.py
@@ -164,7 +164,7 @@ def test_get_from_sqs(self):
         self.assertEqual(len(results), 1)
 
         # Now test getting many messages
-        for i in xrange(3):
+        for i in range(3):
             message = 'message: {0}'.format(i)
             self.producer.publish(message)
 
@@ -210,11 +210,11 @@ def test_put_and_get(self):
         self.assertEqual(message, results)
 
     def test_puts_and_gets(self):
-        for i in xrange(3):
+        for i in range(3):
             message = 'message: %s' % i
             self.producer.publish(message)
 
-        for i in xrange(3):
+        for i in range(3):
             self.assertEqual('message: %s' % i,
                              self.queue(self.channel).get().payload)
 
@@ -233,7 +233,7 @@ def test_puts_and_get_bulk(self):
         self.channel.qos.prefetch_count = 5
 
         # Now, generate all the messages
-        for i in xrange(message_count):
+        for i in range(message_count):
             message = 'message: %s' % i
             self.producer.publish(message)
 
@@ -262,11 +262,11 @@ def test_drain_events_with_prefetch_5(self):
         self.channel.qos.prefetch_count = 5
 
         # Now, generate all the messages
-        for i in xrange(message_count):
+        for i in range(message_count):
             self.producer.publish('message: %s' % i)
 
         # Now drain all the events
-        for i in xrange(message_count):
+        for i in range(message_count):
             self.channel.drain_events()
 
         # How many times was the SQSConnectionMock get_message method called?
@@ -283,11 +283,11 @@ def test_drain_events_with_prefetch_none(self):
         self.channel.qos.prefetch_count = None
 
         # Now, generate all the messages
-        for i in xrange(message_count):
+        for i in range(message_count):
             self.producer.publish('message: %s' % i)
 
         # Now drain all the events
-        for i in xrange(message_count):
+        for i in range(message_count):
             self.channel.drain_events()
 
         # How many times was the SQSConnectionMock get_message method called?
diff --git a/requirements/test-ci3.txt b/requirements/test-ci3.txt
index c5617bb..3d5ce77 100644
--- a/requirements/test-ci3.txt
+++ b/requirements/test-ci3.txt
@@ -3,3 +3,4 @@ coveralls
 redis
 PyYAML
 msgpack-python>0.2.0  # 0.2.0 dropped 2.5 support
+boto
