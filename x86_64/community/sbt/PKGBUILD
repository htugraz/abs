# $Id: PKGBUILD 130197 2015-03-29 14:11:33Z guillaume $
# Maintainer: Guillaume ALAUX <guillaume@archlinux.org>
# Contributor: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Leif Warner <abimelech@gmail.com>

pkgname=sbt
epoch=1
pkgver=0.13.8
pkgrel=1
pkgdesc="A minimally intrusive build tool for Scala projects"
arch=('any')
url='http://www.scala-sbt.org/'
license=('BSD')
depends=('java-runtime-headless' 'sh')
IFS='.' read -a _pkgver <<< "${pkgver}"
source=(http://repo.typesafe.com/typesafe/ivy-releases/org.scala-sbt/sbt-launch/${pkgver}/sbt-launch.jar
        https://raw.githubusercontent.com/${pkgname}/${pkgname}/${_pkgver[1].${_pkgver[2]}}/LICENSE
        sbt.sh
        sbt.conf.sh
        sbt.conf.csh)
sha256sums=('6570bb03df6138ffaa7ac0bbe35eb4ea79062d1146b6929c75cf238d14dd9158'
            '8753689166238271fd8dceb33ff9dbd90fd8620a56b8387bca2b8807ce3209ca'
            '68f25719dde7e7de53e5f42eddd5d36e275a83cbb9f6a28208f245404233a6c7'
            'b90676fc30faa4ad2ec3beb7815491bb58cd6e057ec0593664344d6711482357'
            'b8825593744535787d2c227b61e4ffa2e95a7da071a6488c108ad79abeb9e182')

package() {
  install -d "${pkgdir}"/usr/share/java/${pkgname}
  install -m755 sbt-launch.jar "${pkgdir}"/usr/share/java/${pkgname}

  install -d "${pkgdir}"/usr/bin/
  install -Dm755 "${srcdir}"/sbt.sh "${pkgdir}"/usr/bin/sbt

  install -d "${pkgdir}"/etc/profile.d
  install -Dm644 "${srcdir}"/sbt.conf.sh "${pkgdir}"/etc/profile.d/sbt.sh
  install -Dm644 "${srcdir}"/sbt.conf.csh "${pkgdir}"/etc/profile.d/sbt.csh

  install -D -m644 "${srcdir}"/LICENSE "${pkgdir}"/usr/share/licenses/${pkgname}/LICENSE
}
